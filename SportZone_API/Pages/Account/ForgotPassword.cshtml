@page "/account/forgot-password"
@model SportZone_API.Pages.Account.ForgotPasswordModel
@{
    ViewData["Title"] = "Quên mật khẩu";
}

<div class="account-page">
    <div class="account-card">
        <div class="account-card__header">
            <h1 class="h3 mb-1">Khôi phục mật khẩu</h1>
            <p class="text-muted mb-0">Gửi mã xác nhận và đặt lại mật khẩu để tiếp tục sử dụng SportZone.</p>
        </div>

        <div class="account-card__form">
            <form method="post" asp-page-handler="SendCode" class="mb-4">
                <h2 class="h6 mb-3">1. Gửi mã xác nhận</h2>
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <div class="mb-3">
                    <label asp-for="SendCode.Email" class="form-label">Email đăng ký</label>
                    <input asp-for="SendCode.Email" class="form-control" autocomplete="email" />
                    <span asp-validation-for="SendCode.Email" class="text-danger"></span>
                </div>
                <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-primary">
                        <i class="fa-solid fa-paper-plane me-2"></i>Gửi mã
                    </button>
                </div>
            </form>

            <form method="post" asp-page-handler="Reset">
                <h2 class="h6 mb-3">2. Đặt lại mật khẩu</h2>
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <div class="mb-3">
                    <label asp-for="Reset.Code" class="form-label">Mã xác nhận</label>
                    <input asp-for="Reset.Code" class="form-control" autocomplete="one-time-code" />
                    <span asp-validation-for="Reset.Code" class="text-danger"></span>
                </div>
                <div class="row g-3">
                    <div class="col-12 col-md-6">
                        <label asp-for="Reset.NewPassword" class="form-label">Mật khẩu mới</label>
                        <input asp-for="Reset.NewPassword" class="form-control" autocomplete="new-password" />
                        <span asp-validation-for="Reset.NewPassword" class="text-danger"></span>
                    </div>
                    <div class="col-12 col-md-6">
                        <label asp-for="Reset.ConfirmPassword" class="form-label">Xác nhận mật khẩu</label>
                        <input asp-for="Reset.ConfirmPassword" class="form-control" autocomplete="new-password" />
                        <span asp-validation-for="Reset.ConfirmPassword" class="text-danger"></span>
                    </div>
                </div>
                <div class="d-flex flex-column flex-sm-row gap-2 justify-content-end mt-3">
                    <a class="btn btn-outline-secondary" asp-page="/Account/Login">
                        <i class="fa-solid fa-arrow-left me-2"></i>Quay lại đăng nhập
                    </a>
                    <button type="submit" class="btn btn-success">
                        <i class="fa-solid fa-unlock-keyhole me-2"></i>Đặt lại mật khẩu
                    </button>
                </div>
            </form>
        </div>

        @if (!string.IsNullOrWhiteSpace(Model.ErrorMessage))
        {
            <div class="alert alert-danger account-card__alert" role="alert">
                <i class="fa-solid fa-circle-exclamation me-2"></i>@Model.ErrorMessage
            </div>
        }

        @if (!string.IsNullOrWhiteSpace(Model.SuccessMessage))
        {
            <div class="alert alert-success account-card__alert" role="alert">
                <i class="fa-solid fa-circle-check me-2"></i>@Model.SuccessMessage
            </div>
        }
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
